<html>
<head>

  <!-- JQuery. Skype Web SDK requires JQuery to work. -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

  <!-- Bootstrap layouts and themes. Totally optional, but it makes the examples look much nicer -->
  <link rel="stylesheet" type="text/css" href="../../assets/metro/css/metro-bootstrap.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

  <!-- This is the Skype for Web SDK -->
<script type="text/javascript" src="//swx.cdn.skype.com/shared/v/1.1.23.0/SkypeBootstrap.js"></script>
</head>
<body>
<div id="header"></div>

<!-- Skype for Web API Code by Tom Morgan | thoughtstuff.co.uk -->
<!-- This is one of a number of examples showing how to use the Skype for Web API. The full list is at skypewebsdk.com -->
<!-- Disclaimer: use at your own risk. -->
    <div class="form-horizontal">
  <div class="form-group">
    <label for="username" class="col-sm-2 control-label">Domain</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="domain" placeholder="metio.net">
    </div>
  </div>
  <div class="form-group">
    <label for="password" class="col-sm-2 control-label">Token</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="token" placeholder="Bearer cwt=ABCDE">
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button class="btn btn-default" id="btnLogIn">Log in</button>
    </div>
  </div>
</div>

  <div id="footer"></div>
  
  <!-- This is not needed for the samples to run, but adds standard headers and footers to the samples, to display title, instructions, about etc.
       If you're taking this code and using it yourself, you can remove this.-->
   <script type="text/javascript" src="../../assets/layoutcodesample-min.js"></script>
  
  <script type="text/javascript">
  <!-- These variables are only needed for laying out the code sample, they are not part of the sample code. -->
  var pageTitle = "Logging In With Bearer Tokens";
  var blogPostLocation = "";
  var githubLocation = "https://github.com/tomorgan/SkypeWebSDKSamples/blob/gh-pages/Login/Logging%20In%20With%20Bearer%20Token/index.htm";
  var client;
  $(function () {
    'use strict';
	
	 Skype.initialize({
            apiKey: 'SWX-BUILD-SDK',
        }, function (api) {
            client = new api.application();           
        }, function (err) {
            alert('some error occurred: ' + err);
        });
    $('#btnLogIn').click(function () {
        // start signing in
       
      var domain = $("#domain").val();
      var access_token = $("#token").val();
	  var options = {
          auth: function (req, send) {
              req.headers['Authorization'] = access_token.trim();
              return send(req);
          },
          domain: domain
      };
      client.signInManager.signIn(options).then(function () {
            //log in worked!
            alert('Logged in!');
          }, function (error) {
            //Something went wrong.
            alert(error);
          });
      });
  });
  </script>

</body>
</html>